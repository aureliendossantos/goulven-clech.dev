---
import { getCollection } from "astro:content"
import Hero from "$components/Hero.astro"
import GithubInline from "$components/inlines/GithubInline.astro"
import LinkInline from "$components/inlines/LinkInline.astro"
import TagInline from "$components/inlines/TagInline.astro"
import Section from "$components/Section.astro"
import Layout from "$layouts/Layout.astro"
import Card from "$components/Card.astro"
/**
 * Home page of our blog, so we have to make a good first impression !
 * Contains a presentation of myself (I love talking about myself) and the blog,
 * then display the last articles & some tags you could be interessed in.
 */

// Page title use in Hero & Metadata
const pageTitle = "Hello üëã"

// Import blog articles, except drafts
// See -> https://docs.astro.build/en/guides/content-collections/#querying-collections
const allBlogEntries = await getCollection("blog", ({ data }) => {
  return data.draft !== true
})
---

<Layout title={pageTitle}>
  <Hero title={pageTitle} parents={[]}>
    <p>I'm <GithubInline user="35667800" />, a software developer based in Toulouse, France.</p>
    <p>
      Currently, I'm working for the auction platform
      <LinkInline to="https://encheres-immo.com">Ench√®res Immo</LinkInline>, and I'm the co-founder
      of <LinkInline to="https://gamedevalliance.fr/">Game Dev Alliance</LinkInline>.
    </p>
    <p>
      Here, I chat about <TagInline tag="web development" />, <TagInline tag="coffee" />...
    </p>
  </Hero>
  <Section title="My articles">
    <div class="flex flex-col gap-6">
      {
        /* keep only the three last articles */
        allBlogEntries
          .sort((a, b) => b.data.date.getTime() - a.data.date.getTime())
          .slice(0, 3)
          .map((blogEntry, index) => <Card article={blogEntry} index={index} />)
      }
    </div>
  </Section>
</Layout>
